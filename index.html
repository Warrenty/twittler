<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="Twittler.css">
    <title> Twittler </title>
  </head>
  <body background ='cyan_and_white_mini_grid_seamless_tileable_background_pattern.gif'>
    <div id = "header"> 
      TWITTS
    </div>
    <div id = "space">
      <br>
    </div>
    <script>

      $(document).ready(function(){
        var $body = $('body');

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class = "twits"></div>');
          $tweet.append('@' + '<span class = "users">' +tweet.user + '</span><span class= "timestamp">' + tweet.created_at + '</span><div class = "messages">' + tweet.message+'</div>');
          $tweet.appendTo($body);
          index -= 1;
        }

        var currLength = streams.home.length;
        setInterval(function(){
          var newLength = streams.home.length;
          if (currLength < newLength) {
            var diff = newLength - currLength;
            while(diff > 0) {
              var tweet = streams.home[currLength-diff];
              var $tweet = $('<div class = "twits"></div>');
              $tweet.append('@' + '<span class = "users">' +tweet.user + '</span><span class= "timestamp">' + tweet.created_at + '</span><div class = "messages">' + tweet.message+'</div>');
              $tweet.insertAfter($('#space')).hide().fadeIn(1000);
              diff -= 1;
              $("body div:last").parent().remove();
            }
            currLength = newLength;
          }
        },1000)

      });

    </script>
    

    </style>
  </body>
</html>
